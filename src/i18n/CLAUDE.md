[æ ¹ç›®å½•](../../CLAUDE.md) > [src](../) > **i18n**

# å›½é™…åŒ–æ¨¡å—æ–‡æ¡£

## å˜æ›´è®°å½• (Changelog)

### 2025-09-07 22:58:58 - å‡çº§åˆ° next-intl 4.3.6
- â¬†ï¸ ä»è‡ªå®šä¹‰ i18n ç³»ç»Ÿå‡çº§åˆ° next-intl 4.3.6
- ğŸŒ æ–°å¢ Hindi (hi) è¯­è¨€æ”¯æŒï¼Œç°æ”¯æŒ zh/en/hi
- ğŸ”„ å®ç° `as-needed` è·¯ç”±å‰ç¼€æ¨¡å¼ (é»˜è®¤è¯­è¨€æ— å‰ç¼€)
- ğŸ“± é…ç½®è·¯ç”±å›½é™…åŒ–å’Œä¸­é—´ä»¶é›†æˆ
- ğŸ¯ é»˜è®¤è¯­è¨€æ”¹ä¸ºè‹±æ–‡ (en)ï¼Œç¦ç”¨æµè§ˆå™¨è¯­è¨€æ£€æµ‹
- ğŸ“ é‡æ„æ–‡ä»¶ç»“æ„ï¼š`locales/` â†’ `messages/`

### 2025-09-07 19:36:52 - æ¨¡å—æ–‡æ¡£åˆå§‹åŒ–
- åˆ†æè‡ªå®šä¹‰å›½é™…åŒ–ç³»ç»Ÿæ¶æ„
- è®°å½•å¤šè¯­è¨€æ”¯æŒå®ç°

---

## æ¨¡å—èŒè´£

å›½é™…åŒ–æ¨¡å—æä¾›åº”ç”¨çš„å¤šè¯­è¨€æ”¯æŒç³»ç»Ÿï¼ŒåŸºäº next-intl 4.3.6 å®ç°ã€‚æ”¯æŒä¸­æ–‡ï¼ˆzhï¼‰ã€è‹±æ–‡ï¼ˆenï¼‰å’Œ Hindiï¼ˆhiï¼‰ä¸‰ç§è¯­è¨€ï¼Œé€šè¿‡è·¯ç”±å‰ç¼€å’Œä¸­é—´ä»¶å®ç°è‡ªåŠ¨è¯­è¨€æ£€æµ‹å’Œé¡µé¢å›½é™…åŒ–ã€‚

## å…¥å£ä¸å¯åŠ¨

### æ ¸å¿ƒé…ç½®æ–‡ä»¶
- **è¯­è¨€é…ç½®**: `config.ts` - å®šä¹‰æ”¯æŒçš„è¯­è¨€åˆ—è¡¨å’Œé»˜è®¤è¯­è¨€
- **è·¯ç”±é…ç½®**: `routing.ts` - next-intl è·¯ç”±å’Œå‰ç¼€é…ç½®
- **å¯¼èˆªå·¥å…·**: `navigation.ts` - å›½é™…åŒ–å¯¼èˆª API
- **æœåŠ¡ç«¯é…ç½®**: `request.ts` - æœåŠ¡ç«¯æ¸²æŸ“å›½é™…åŒ–æ”¯æŒ

### æ–‡ä»¶ç»“æ„
```
i18n/
â”œâ”€â”€ config.ts          # è¯­è¨€é…ç½® (zh/en/hi, é»˜è®¤ en)
â”œâ”€â”€ routing.ts         # è·¯ç”±å›½é™…åŒ–é…ç½®
â”œâ”€â”€ navigation.ts      # å¯¼èˆª API (Link, redirect, useRouter)
â”œâ”€â”€ request.ts         # æœåŠ¡ç«¯å›½é™…åŒ–
â”œâ”€â”€ index.ts          # ç»Ÿä¸€å¯¼å‡º
â””â”€â”€ messages/         # ç¿»è¯‘æ–‡ä»¶ç›®å½•
    â”œâ”€â”€ zh.json       # ä¸­æ–‡ç¿»è¯‘ (93 è¡Œ)
    â”œâ”€â”€ en.json       # è‹±æ–‡ç¿»è¯‘
    â””â”€â”€ hi.json       # Hindi ç¿»è¯‘ (å¦‚å­˜åœ¨)
```

## å¯¹å¤–æ¥å£

### è¯­è¨€é…ç½®
```typescript
// config.ts
export type Locale = (typeof locales)[number];
export const locales = ['zh', 'en', 'hi'] as const;
export const defaultLocale: Locale = 'en';
```

### è·¯ç”±é…ç½®
```typescript
// routing.ts  
export const routing = defineRouting({
  locales: ['zh', 'en', 'hi'],
  defaultLocale: 'en',
  localePrefix: "as-needed",    // é»˜è®¤è¯­è¨€ä¸æ˜¾ç¤ºå‰ç¼€
  localeDetection: false        // ç¦ç”¨æµè§ˆå™¨è¯­è¨€æ£€æµ‹
});
```

### å›½é™…åŒ– Hooks (next-intl)
```typescript
// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
import { useTranslations, useLocale } from 'next-intl';

const t = useTranslations();
const locale = useLocale();

// ç¿»è¯‘æ–‡æœ¬
const title = t('header.title');
const toolName = t('tools.json-formatter.name');
```

### å¯¼èˆª API
```typescript
// navigation.ts - ç±»å‹å®‰å…¨çš„å›½é™…åŒ–å¯¼èˆª
import { Link, redirect, useRouter } from '@/i18n/navigation';

// è‡ªåŠ¨å¤„ç†è¯­è¨€å‰ç¼€çš„é“¾æ¥
<Link href="/tools/json-formatter">JSON å·¥å…·</Link>

// ç¼–ç¨‹å¼å¯¼èˆª
const router = useRouter();
router.push('/tools/json-formatter');
```

## å…³é”®ä¾èµ–ä¸é…ç½®

### å¤–éƒ¨ä¾èµ–
- `next-intl` 4.3.6 - å®Œæ•´çš„ Next.js å›½é™…åŒ–è§£å†³æ–¹æ¡ˆ
- `next` 15.5.2 - Next.js æ¡†æ¶æ”¯æŒ

### è·¯ç”±é›†æˆ
- **ä¸­é—´ä»¶**: `../middleware.ts` - è‡ªåŠ¨è·¯ç”±åˆ†å‘å’Œè¯­è¨€æ£€æµ‹
- **App Router**: `../app/[locale]/` - åŠ¨æ€è¯­è¨€è·¯ç”±
- **å¸ƒå±€**: `../app/layout.tsx` - NextIntlClientProvider é…ç½®

### é…ç½®ç‰¹ç‚¹
- **è·¯ç”±æ¨¡å¼**: `as-needed` (é»˜è®¤è¯­è¨€æ— å‰ç¼€ï¼Œå…¶ä»–æœ‰å‰ç¼€)
- **é»˜è®¤è¯­è¨€**: English (en)
- **è¯­è¨€æ£€æµ‹**: ç¦ç”¨è‡ªåŠ¨æ£€æµ‹ï¼Œæ‰‹åŠ¨æ§åˆ¶
- **æœåŠ¡ç«¯æ¸²æŸ“**: æ”¯æŒ SSR å›½é™…åŒ–

## æ•°æ®æ¨¡å‹

### ç¿»è¯‘æ–‡ä»¶ç»“æ„ (messages/*.json)
```typescript
// zh.json ç»“æ„ç¤ºä¾‹
{
  "common": {
    "tools": "å·¥å…·",
    "language": "è¯­è¨€", 
    "theme": "ä¸»é¢˜",
    "home": "é¦–é¡µ",
    "search": "æœç´¢",
    "clear": "æ¸…é™¤",
    "copy": "å¤åˆ¶",
    "format": "æ ¼å¼åŒ–",
    "minify": "å‹ç¼©",
    "convert": "è½¬æ¢", 
    "download": "ä¸‹è½½",
    "coming_soon": "å³å°†æ¨å‡ºæ›´å¤šå·¥å…·...",
    "click_sidebar": "ç‚¹å‡»å·¦ä¾§èœå•ä½¿ç”¨"
  },
  "theme": {
    "light": "äº®è‰²æ¨¡å¼",
    "dark": "æš—é»‘æ¨¡å¼", 
    "system": "è·Ÿéšç³»ç»Ÿ"
  },
  "header": {
    "title": "ITå·¥å…·é›†åˆ",
    "subtitle": "å¼€å‘è€…å¿…å¤‡å·¥å…·ç®±"
  },
  "meta": {
    "title": "ITå·¥å…·é›†åˆ - å¼€å‘è€…å¿…å¤‡å·¥å…·ç®±",
    "description": "ä¸“ä¸ºå¼€å‘è€…æ‰“é€ çš„åœ¨çº¿å·¥å…·é›†åˆï¼ŒåŒ…å«JSONæ ¼å¼åŒ–ã€æ–‡æœ¬å¤„ç†ã€åŠ å¯†è§£å¯†ç­‰å®ç”¨å·¥å…·"
  },
  "home": {
    "tools_total": "å·¥å…·æ€»æ•°",
    "tools_categories": "å·¥å…·åˆ†ç±»",
    "update_frequency": "æ›´æ–°é¢‘ç‡",
    // ... æ›´å¤šé¦–é¡µç›¸å…³ç¿»è¯‘
  },
  "categories": {
    "json": "JSONå·¥å…·",
    "text": "æ–‡æœ¬å·¥å…·",
    "crypto": "åŠ å¯†å·¥å…·",
    "network": "ç½‘ç»œå·¥å…·",
    "image": "å›¾ç‰‡å·¥å…·"
  },
  "tools": {
    "json-formatter": {
      "name": "JSONæ ¼å¼åŒ–å™¨",
      "description": "æ ¼å¼åŒ–ã€éªŒè¯å’Œå‹ç¼©JSONæ•°æ®",
      "placeholder": "è¯·è¾“å…¥JSONæ•°æ®...",
      "invalid": "æ— æ•ˆçš„JSONæ ¼å¼",
      // ... æ›´å¤šå·¥å…·ç›¸å…³ç¿»è¯‘
    },
    "json-to-csv": {
      "name": "JSONè½¬CSV", 
      "description": "å°†JSONæ•°æ®è½¬æ¢ä¸ºCSVæ ¼å¼",
      // ... å·¥å…·ç›¸å…³ç¿»è¯‘
    }
  }
}
```

### ç¿»è¯‘é”®å‘½åè§„èŒƒ
- `common.*` - é€šç”¨ UI æ–‡æœ¬ï¼ˆæŒ‰é’®ã€æ“ä½œç­‰ï¼‰
- `theme.*` - ä¸»é¢˜åˆ‡æ¢ç›¸å…³
- `header.*` - é¡µé¢å¤´éƒ¨ç›¸å…³
- `meta.*` - SEO å…ƒæ•°æ®
- `home.*` - é¦–é¡µå†…å®¹
- `categories.*` - å·¥å…·åˆ†ç±»åç§°
- `tools.{tool-id}.*` - å…·ä½“å·¥å…·çš„æ‰€æœ‰æ–‡æœ¬

## æµ‹è¯•ä¸è´¨é‡

### å½“å‰çŠ¶æ€
- âŒ ç¼ºå°‘ç¿»è¯‘å®Œæ•´æ€§æµ‹è¯•
- âŒ ç¼ºå°‘è¯­è¨€åˆ‡æ¢åŠŸèƒ½æµ‹è¯•
- âŒ ç¼ºå°‘è·¯ç”±å›½é™…åŒ–æµ‹è¯•
- âŒ ç¼ºå°‘ Hindi ç¿»è¯‘æ–‡ä»¶
- âŒ ç¼ºå°‘ç¿»è¯‘é”®è¦†ç›–ç‡æ£€æŸ¥
- âœ… next-intl ç±»å‹å®‰å…¨
- âœ… è·¯ç”±ä¸­é—´ä»¶æ­£å¸¸å·¥ä½œ
- âœ… ä¸­è‹±æ–‡ç¿»è¯‘å®Œæ•´

### æµ‹è¯•å»ºè®®
- **ç¿»è¯‘è¦†ç›–æµ‹è¯•**: ç¡®ä¿æ‰€æœ‰è¯­è¨€æ–‡ä»¶åŒ…å«ç›¸åŒçš„ç¿»è¯‘é”®
- **è·¯ç”±æµ‹è¯•**: æµ‹è¯•å¤šè¯­è¨€è·¯ç”±åˆ‡æ¢å’Œé‡å®šå‘
- **ä¸­é—´ä»¶æµ‹è¯•**: æµ‹è¯•è¯­è¨€æ£€æµ‹å’Œè·¯ç”±åˆ†å‘
- **ç¿»è¯‘å‡½æ•°æµ‹è¯•**: æµ‹è¯• `useTranslations()` çš„å„ç§åœºæ™¯
- **å‚æ•°åŒ–ç¿»è¯‘æµ‹è¯•**: æµ‹è¯•æ”¯æŒå˜é‡æ’å€¼çš„ç¿»è¯‘é”®
- **SEO æµ‹è¯•**: éªŒè¯å¤šè¯­è¨€é¡µé¢çš„å…ƒæ•°æ®æ­£ç¡®æ€§

## å¸¸è§é—®é¢˜ (FAQ)

### Q: å¦‚ä½•æ·»åŠ æ–°çš„è¯­è¨€ï¼Ÿ
A: 
1. åœ¨ `config.ts` ä¸­æ·»åŠ æ–°è¯­è¨€åˆ° `locales` æ•°ç»„
2. åœ¨ `messages/` ç›®å½•åˆ›å»ºå¯¹åº”çš„ JSON ç¿»è¯‘æ–‡ä»¶
3. ç¡®ä¿ç¿»è¯‘æ–‡ä»¶åŒ…å«æ‰€æœ‰ç°æœ‰çš„ç¿»è¯‘é”®

### Q: å¦‚ä½•æ·»åŠ æ–°çš„ç¿»è¯‘æ–‡æœ¬ï¼Ÿ
A: åœ¨æ‰€æœ‰è¯­è¨€çš„ `messages/*.json` æ–‡ä»¶ä¸­åŒæ­¥æ·»åŠ ç›¸åŒçš„é”®å€¼å¯¹ï¼Œä¿æŒç»“æ„ä¸€è‡´ã€‚

### Q: è·¯ç”±å‰ç¼€å¦‚ä½•å·¥ä½œï¼Ÿ
A: 
- é»˜è®¤è¯­è¨€ (en): `/tools/json-formatter` (æ— å‰ç¼€)
- å…¶ä»–è¯­è¨€ (zh): `/zh/tools/json-formatter` (æœ‰å‰ç¼€)
- ä¸­é—´ä»¶è‡ªåŠ¨å¤„ç†é‡å®šå‘

### Q: å¦‚ä½•å¤„ç†å¸¦å‚æ•°çš„ç¿»è¯‘ï¼Ÿ
A: next-intl æ”¯æŒå‚æ•°åŒ–ç¿»è¯‘ï¼Œä¾‹å¦‚ï¼š
```json
"tools_count": "{count} ä¸ªå·¥å…·"
```
```typescript
t('tools_count', { count: 5 })  // "5 ä¸ªå·¥å…·"
```

### Q: å¦‚ä½•åœ¨æœåŠ¡ç«¯ç»„ä»¶ä¸­ä½¿ç”¨ç¿»è¯‘ï¼Ÿ
A: ä½¿ç”¨ `request.ts` ä¸­çš„ `getTranslations` å‡½æ•°ï¼š
```typescript
import { getTranslations } from '@/i18n/request';

const t = await getTranslations('common');
const title = t('title');
```

## ç›¸å…³æ–‡ä»¶æ¸…å•

### é…ç½®æ–‡ä»¶
- `config.ts` - è¯­è¨€é…ç½® (4 è¡Œ)
- `routing.ts` - è·¯ç”±å›½é™…åŒ–é…ç½® (14 è¡Œ)  
- `navigation.ts` - å›½é™…åŒ–å¯¼èˆª API
- `request.ts` - æœåŠ¡ç«¯å›½é™…åŒ–æ”¯æŒ
- `index.ts` - ç»Ÿä¸€å¯¼å‡º

### ç¿»è¯‘æ–‡ä»¶
- `messages/zh.json` - ä¸­æ–‡ç¿»è¯‘ (93 è¡Œï¼Œå®Œæ•´)
- `messages/en.json` - è‹±æ–‡ç¿»è¯‘ (é¢„æœŸå®Œæ•´)
- `messages/hi.json` - Hindi ç¿»è¯‘ (å¾…æ·»åŠ )

### é›†æˆæ–‡ä»¶  
- `../middleware.ts` - è·¯ç”±ä¸­é—´ä»¶ (14 è¡Œ)
- `../app/layout.tsx` - NextIntlClientProvider é…ç½®
- `../app/[locale]/` - å¤šè¯­è¨€è·¯ç”±ç»“æ„

### ä½¿ç”¨ç¤ºä¾‹
```typescript
// å®¢æˆ·ç«¯ç»„ä»¶
import { useTranslations, useLocale } from 'next-intl';

export default function MyComponent() {
  const t = useTranslations();
  const locale = useLocale();
  
  return (
    <div>
      <h1>{t('header.title')}</h1>
      <p>Current locale: {locale}</p>
    </div>
  );
}

// ç±»å‹å®‰å…¨çš„å¯¼èˆª
import { Link } from '@/i18n/navigation';

<Link href="/tools/json-formatter">
  {t('tools.json-formatter.name')}
</Link>
```

---

*æœ€åæ›´æ–°: 2025-09-07 22:58:58*