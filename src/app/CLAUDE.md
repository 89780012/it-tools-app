[æ ¹ç›®å½•](../../CLAUDE.md) > [src](../) > **app**

# App Router æ¨¡å—æ–‡æ¡£

## å˜æ›´è®°å½• (Changelog)

### 2025-09-07 22:58:58 - å›½é™…åŒ–è·¯ç”±é‡æ„
- ğŸŒ å®ç° `[locale]` åŠ¨æ€è·¯ç”±ç»“æ„ï¼Œæ”¯æŒå¤šè¯­è¨€è·¯å¾„
- ğŸ“± æ·»åŠ  `middleware.ts` å¤„ç†è¯­è¨€è·¯ç”±åˆ†å‘
- ğŸ”„ ä¿ç•™æ—§ç‰ˆé¦–é¡µ (`page.tsx`) ä»¥å…¼å®¹ç°æœ‰è·¯ç”±
- âš¡ å‡çº§åˆ° Next.js 15.5.2 + next-intl 4.3.6
- ğŸ› ï¸ æ–°å¢ä¸¤ä¸ªå¯ç”¨å·¥å…·ï¼šJSON æ ¼å¼åŒ–å™¨ã€JSON è½¬ CSV

### 2025-09-07 19:36:52 - æ¨¡å—æ–‡æ¡£åˆå§‹åŒ–
- åˆ†æ Next.js App Router ç»“æ„
- è®°å½•è·¯ç”±é…ç½®ä¸é¡µé¢ç»„ä»¶

---

## æ¨¡å—èŒè´£

App Router æ¨¡å—è´Ÿè´£åº”ç”¨çš„è·¯ç”±ç»“æ„ã€å¸ƒå±€ç»„ä»¶å’Œé¡µé¢æ¸²æŸ“ã€‚åŸºäº Next.js 15.5.2 App Router æ¶æ„ï¼Œå®ç°äº†å®Œæ•´çš„å›½é™…åŒ–è·¯ç”±ç³»ç»Ÿï¼Œæ”¯æŒå¤šè¯­è¨€è·¯å¾„å’Œä¸­é—´ä»¶è·¯ç”±åˆ†å‘ã€‚

## å…¥å£ä¸å¯åŠ¨

### æ ¸å¿ƒå¸ƒå±€
- **æ ¹å¸ƒå±€**: `layout.tsx` - åº”ç”¨å…¨å±€å¸ƒå±€ï¼Œé…ç½®å­—ä½“ã€ä¸»é¢˜æä¾›è€…å’Œå›½é™…åŒ–
- **ä¸­é—´ä»¶**: `../middleware.ts` - å¤„ç†è¯­è¨€è·¯ç”±åˆ†å‘å’Œè·¯å¾„åŒ¹é…

### é¡µé¢ç»“æ„
```
app/
â”œâ”€â”€ layout.tsx          # æ ¹å¸ƒå±€ (NextIntlClientProvider)
â”œâ”€â”€ page.tsx           # æ—§ç‰ˆé¦–é¡µ (å…¼å®¹æ€§ä¿ç•™)
â”œâ”€â”€ globals.css        # å…¨å±€æ ·å¼
â”œâ”€â”€ favicon.ico        # ç½‘ç«™å›¾æ ‡
â””â”€â”€ [locale]/          # åŠ¨æ€è¯­è¨€è·¯ç”±
    â”œâ”€â”€ page.tsx       # æ–°ç‰ˆé¦–é¡µ (å¤šè¯­è¨€)
    â””â”€â”€ tools/         # å·¥å…·é¡µé¢
        â”œâ”€â”€ json-formatter/
        â”‚   â””â”€â”€ page.tsx
        â””â”€â”€ json-to-csv/
            â””â”€â”€ page.tsx
```

## å¯¹å¤–æ¥å£

### è·¯ç”±ç»“æ„ (å›½é™…åŒ–)
```
/                           # æ ¹è·¯å¾„ (é‡å®šå‘åˆ°é»˜è®¤è¯­è¨€)
/zh/                        # ä¸­æ–‡é¦–é¡µ
/en/                        # è‹±æ–‡é¦–é¡µ  
/hi/                        # Hindi é¦–é¡µ
/zh/tools/json-formatter    # JSON æ ¼å¼åŒ–å·¥å…· (ä¸­æ–‡)
/zh/tools/json-to-csv       # JSON è½¬ CSV å·¥å…· (ä¸­æ–‡)
/en/tools/json-formatter    # JSON æ ¼å¼åŒ–å·¥å…· (è‹±æ–‡)
/en/tools/json-to-csv       # JSON è½¬ CSV å·¥å…· (è‹±æ–‡)
```

### é¡µé¢ç»„ä»¶
- `RootLayout`: å…¨å±€å¸ƒå±€ç»„ä»¶ï¼Œé…ç½®å­—ä½“ã€ä¸»é¢˜ã€å›½é™…åŒ–ä¸Šä¸‹æ–‡
- `Home` (æ—§ç‰ˆ): æ ¹è·¯å¾„é¦–é¡µï¼ŒåŸºç¡€å›½é™…åŒ–æ”¯æŒ
- `LocalizedHome` (æ–°ç‰ˆ): æœ¬åœ°åŒ–é¦–é¡µï¼Œå®Œæ•´å¤šè¯­è¨€æ”¯æŒ
- `JsonFormatterPage`: JSON æ ¼å¼åŒ–å·¥å…·é¡µé¢
- `JsonToCsvPage`: JSON è½¬ CSV å·¥å…·é¡µé¢

## å…³é”®ä¾èµ–ä¸é…ç½®

### å†…éƒ¨ä¾èµ–
- `@/components/theme-provider` - ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½
- `@/components/header` - é¡µé¢å¤´éƒ¨ç»„ä»¶
- `@/components/app-sidebar` - ä¾§è¾¹æ å¯¼èˆª  
- `@/components/tool-container` - å·¥å…·å®¹å™¨ç»„ä»¶
- `@/lib/tools-config` - å·¥å…·é…ç½®æ•°æ®
- `@/i18n/*` - å›½é™…åŒ–é…ç½®ä¸æ¶ˆæ¯

### å¤–éƒ¨ä¾èµ–
- `next/font/google` - Google å­—ä½“åŠ è½½ (Geist Sans/Mono)
- `next-intl` - å›½é™…åŒ–æ”¯æŒ (4.3.6)
- `lucide-react` - å›¾æ ‡ç»„ä»¶åº“
- `@radix-ui/*` - UI åŸºç¡€ç»„ä»¶
- `class-variance-authority` - æ ·å¼å˜ä½“ç®¡ç†

### é…ç½®ä¿¡æ¯
- **å­—ä½“é…ç½®**: Geist Sans (--font-geist-sans) + Geist Mono (--font-geist-mono)
- **è¯­è¨€æ”¯æŒ**: zh/en/hi (é»˜è®¤: en)
- **ä¸»é¢˜æ”¯æŒ**: light/dark/system (é»˜è®¤: system)
- **è·¯ç”±æ¨¡å¼**: App Router + åŠ¨æ€ `[locale]` è·¯ç”±
- **ä¸­é—´ä»¶**: è‡ªåŠ¨è¯­è¨€æ£€æµ‹ä¸è·¯ç”±åˆ†å‘

## æ•°æ®æ¨¡å‹

### å…¨å±€å¸ƒå±€é…ç½®
```typescript
// layout.tsx
const geistSans = Geist({
  variable: "--font-geist-sans",
  subsets: ["latin"],
});

const geistMono = Geist_Mono({
  variable: "--font-geist-mono", 
  subsets: ["latin"],
});

// HTML lang å±æ€§ç¡¬ç¼–ç ä¸º "zh"
<html lang="zh" suppressHydrationWarning>
```

### å·¥å…·é¡µé¢æ•°æ®ç»“æ„
```typescript
// å·¥å…·é¡µé¢çŠ¶æ€æ¨¡å‹
interface ToolPageState {
  input: string;           // ç”¨æˆ·è¾“å…¥
  output: string;          // å¤„ç†ç»“æœ
  error: string;           // é”™è¯¯ä¿¡æ¯
  isValid: boolean;        // éªŒè¯çŠ¶æ€
}

// å·¥å…·é…ç½®å¼•ç”¨
import { toolsConfig } from "@/lib/tools-config"
const popularTools = toolsConfig.flatMap(category => category.tools).slice(0, 6)
```

## æµ‹è¯•ä¸è´¨é‡

### å½“å‰çŠ¶æ€
- âŒ ç¼ºå°‘é¡µé¢ç»„ä»¶å•å…ƒæµ‹è¯•
- âŒ ç¼ºå°‘è·¯ç”±æµ‹è¯• (ç‰¹åˆ«æ˜¯å¤šè¯­è¨€è·¯ç”±)
- âŒ ç¼ºå°‘ä¸­é—´ä»¶æµ‹è¯•
- âŒ ç¼ºå°‘SEOæµ‹è¯•
- âŒ ç¼ºå°‘å·¥å…·é¡µé¢é›†æˆæµ‹è¯•
- âœ… TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡
- âœ… ESLint é™æ€æ£€æŸ¥é€šè¿‡

### æµ‹è¯•å»ºè®®
- **è·¯ç”±æµ‹è¯•**: æµ‹è¯•å¤šè¯­è¨€è·¯ç”±åˆ‡æ¢å’Œä¸­é—´ä»¶é‡å®šå‘
- **é¡µé¢æ¸²æŸ“æµ‹è¯•**: ä½¿ç”¨ `@testing-library/react` æµ‹è¯•é¡µé¢ç»„ä»¶
- **å›½é™…åŒ–æµ‹è¯•**: æµ‹è¯• next-intl ç¿»è¯‘åŠŸèƒ½
- **å·¥å…·åŠŸèƒ½æµ‹è¯•**: æµ‹è¯• JSON å·¥å…·çš„è¾“å…¥è¾“å‡ºé€»è¾‘
- **SEOæµ‹è¯•**: éªŒè¯å¤šè¯­è¨€é¡µé¢çš„å…ƒæ•°æ®
- **å¯è®¿é—®æ€§æµ‹è¯•**: ç¡®ä¿æ‰€æœ‰é¡µé¢ç¬¦åˆ a11y æ ‡å‡†

## å¸¸è§é—®é¢˜ (FAQ)

### Q: å¦‚ä½•æ·»åŠ æ–°çš„å·¥å…·é¡µé¢ï¼Ÿ
A: 
1. åœ¨ `tools/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ–‡ä»¶å¤¹ï¼Œæ·»åŠ  `page.tsx` æ–‡ä»¶
2. åœ¨ `@/lib/tools-config.ts` ä¸­æ³¨å†Œå·¥å…·é…ç½®
3. åœ¨ `@/i18n/messages/` å„è¯­è¨€æ–‡ä»¶ä¸­æ·»åŠ ç¿»è¯‘æ–‡æœ¬
4. ç¡®ä¿ä½¿ç”¨ `"use client"` å’Œ `useTranslations()` Hook

### Q: å¦‚ä½•ä¿®æ”¹å…¨å±€æ ·å¼ï¼Ÿ
A: ç¼–è¾‘ `globals.css` æ–‡ä»¶ï¼Œæˆ–é€šè¿‡ `layout.tsx` è°ƒæ•´ CSS å˜é‡å’Œ Tailwind é…ç½®ã€‚

### Q: å¤šè¯­è¨€è·¯ç”±å¦‚ä½•å·¥ä½œï¼Ÿ
A: 
- `middleware.ts` æ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼Œæ£€æµ‹è¯­è¨€å¹¶é‡å®šå‘
- `[locale]/` åŠ¨æ€è·¯ç”±å¤„ç†å…·ä½“çš„è¯­è¨€é¡µé¢
- `next-intl` æä¾›ç¿»è¯‘æ”¯æŒå’Œæœ¬åœ°åŒ–ä¸Šä¸‹æ–‡

### Q: æ—§ç‰ˆé¦–é¡µ `page.tsx` è¿˜æœ‰ç”¨å—ï¼Ÿ
A: ç›®å‰ä¿ç•™ç”¨äºå…¼å®¹æ€§ï¼Œä½†æ–°åŠŸèƒ½åº”è¯¥åœ¨ `[locale]/page.tsx` ä¸­å¼€å‘ã€‚

## ç›¸å…³æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒæ–‡ä»¶
- `layout.tsx` - æ ¹å¸ƒå±€ç»„ä»¶ (39 è¡Œ)
- `page.tsx` - æ—§ç‰ˆé¦–é¡µç»„ä»¶ (173 è¡Œ)
- `[locale]/page.tsx` - æ–°ç‰ˆæœ¬åœ°åŒ–é¦–é¡µ (173 è¡Œ)
- `globals.css` - å…¨å±€æ ·å¼å’Œ CSS å˜é‡
- `favicon.ico` - ç½‘ç«™å›¾æ ‡

### å·¥å…·é¡µé¢ (å¤šè¯­è¨€)
- `[locale]/tools/json-formatter/page.tsx` - JSON æ ¼å¼åŒ–å·¥å…· (179 è¡Œ)
- `[locale]/tools/json-to-csv/page.tsx` - JSON è½¬ CSV å·¥å…·

### é…ç½®æ–‡ä»¶
- `../middleware.ts` - å¤šè¯­è¨€è·¯ç”±ä¸­é—´ä»¶ (14 è¡Œ)
- `../../next.config.ts` - Next.js é…ç½®
- `../../tsconfig.json` - TypeScript é…ç½®

### æ ·å¼æ–‡ä»¶  
- `globals.css` - Tailwind CSS åŸºç¡€æ ·å¼
- `../../tailwind.config.js` - Tailwind é…ç½®
- `../../postcss.config.mjs` - PostCSS é…ç½®

### å›½é™…åŒ–æ”¯æŒ
- `@/i18n/config.ts` - è¯­è¨€é…ç½® (zh/en/hi)
- `@/i18n/routing.ts` - è·¯ç”±å›½é™…åŒ–é…ç½®
- `@/i18n/messages/zh.json` - ä¸­æ–‡ç¿»è¯‘ (93 è¡Œ)
- `@/i18n/messages/en.json` - è‹±æ–‡ç¿»è¯‘

---

*æœ€åæ›´æ–°: 2025-09-07 22:58:58*